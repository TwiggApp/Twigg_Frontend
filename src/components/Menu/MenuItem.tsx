import { useState } from "react";
import Dots from "../../assets/dashboard/dots-white.svg";

interface MenuItemProps {
  menuItem: {
    name: string;
    subtitle: string;
    image: string;
  };
  onClick?: () => void;
  onEditClick?: () => void;
}

const CloseSvg = () => {
  return (
    <svg width="12" height="12" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M12.892 0.302021C12.7995 0.209317 12.6896 0.135769 12.5686 0.085588C12.4477 0.0354065 12.318 0.00957632 12.187 0.00957632C12.0561 0.00957632 11.9264 0.0354065 11.8054 0.085588C11.6844 0.135769 11.5745 0.209317 11.482 0.302021L6.59202 5.18202L1.70202 0.29202C1.60944 0.199438 1.49953 0.125998 1.37856 0.0758934C1.2576 0.0257884 1.12795 9.75509e-10 0.997021 0C0.86609 -9.75509e-10 0.736441 0.0257884 0.615477 0.0758934C0.494513 0.125998 0.384602 0.199438 0.29202 0.29202C0.199438 0.384602 0.125998 0.494513 0.0758934 0.615477C0.0257884 0.736441 -9.75509e-10 0.86609 0 0.997021C9.75509e-10 1.12795 0.0257884 1.2576 0.0758934 1.37856C0.125998 1.49953 0.199438 1.60944 0.29202 1.70202L5.18202 6.59202L0.29202 11.482C0.199438 11.5746 0.125998 11.6845 0.0758934 11.8055C0.0257884 11.9264 0 12.0561 0 12.187C0 12.318 0.0257884 12.4476 0.0758934 12.5686C0.125998 12.6895 0.199438 12.7994 0.29202 12.892C0.384602 12.9846 0.494513 13.058 0.615477 13.1081C0.736441 13.1583 0.86609 13.184 0.997021 13.184C1.12795 13.184 1.2576 13.1583 1.37856 13.1081C1.49953 13.058 1.60944 12.9846 1.70202 12.892L6.59202 8.00202L11.482 12.892C11.5746 12.9846 11.6845 13.058 11.8055 13.1081C11.9264 13.1583 12.0561 13.184 12.187 13.184C12.318 13.184 12.4476 13.1583 12.5686 13.1081C12.6895 13.058 12.7994 12.9846 12.892 12.892C12.9846 12.7994 13.058 12.6895 13.1081 12.5686C13.1583 12.4476 13.184 12.318 13.184 12.187C13.184 12.0561 13.1583 11.9264 13.1081 11.8055C13.058 11.6845 12.9846 11.5746 12.892 11.482L8.00202 6.59202L12.892 1.70202C13.272 1.32202 13.272 0.682021 12.892 0.302021Z"
        fill="#555"
      />
    </svg>
  );
};

export default function MenuItem({ menuItem, onClick, onEditClick }: MenuItemProps) {
  const [showMenu, setShowMenu] = useState(false);

  return (
    <div className="bg-white w-[205px] max-sm:w-full h-[209px] rounded-md flex flex-col shadow-sm relative">
      {showMenu && (
        <div className="absolute z-10 right-[-160px] top-[40px] max-md:right-2 max-md:top-2 w-[196px] h-[142px] rounded-md overflow-hidden bg-white shadow-lg">
          <div
            className="flex flex-row justify-end px-4 pt-3 cursor-pointer"
            onClick={() => {
              setShowMenu(false);
            }}
          >
            <CloseSvg />
          </div>
          <div
            className="flex flex-row p-4 cursor-pointer"
            onClick={() => {
              onEditClick && onEditClick();
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="19"
              height="18"
              viewBox="0 0 19 18"
              fill="none"
            >
              <path
                d="M12 3L15 6M10 17H18M2 13L1 17L5 16L16.586 4.414C16.9609 4.03894 17.1716 3.53033 17.1716 3C17.1716 2.46967 16.9609 1.96106 16.586 1.586L16.414 1.414C16.0389 1.03906 15.5303 0.828427 15 0.828427C14.4697 0.828427 13.9611 1.03906 13.586 1.414L2 13Z"
                stroke="#555555"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <p className="font-nunito text-[#555] ml-3">Edit details</p>
          </div>
          <div className="flex flex-row p-4 cursor-pointer">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M9.85798 5.14286H14.1437C14.1437 4.57454 13.9179 4.02949 13.5161 3.62763C13.1142 3.22577 12.5692 3 12.0008 3C11.4325 3 10.8875 3.22577 10.4856 3.62763C10.0837 4.02949 9.85798 4.57454 9.85798 5.14286ZM8.57227 5.14286C8.57227 4.23354 8.93349 3.36147 9.57647 2.71849C10.2195 2.07551 11.0915 1.71429 12.0008 1.71429C12.9102 1.71429 13.7822 2.07551 14.4252 2.71849C15.0682 3.36147 15.4294 4.23354 15.4294 5.14286H20.7866C20.957 5.14286 21.1206 5.21059 21.2411 5.33115C21.3617 5.45171 21.4294 5.61522 21.4294 5.78572C21.4294 5.95621 21.3617 6.11973 21.2411 6.24028C21.1206 6.36084 20.957 6.42857 20.7866 6.42857H19.6637L18.6206 18.9454C18.5447 19.856 18.1293 20.7048 17.457 21.3235C16.7846 21.9422 15.9043 22.2856 14.9906 22.2857H9.01112C8.0974 22.2856 7.21707 21.9422 6.5447 21.3235C5.87233 20.7048 5.45702 19.856 5.38112 18.9454L4.33798 6.42857H3.21512C3.04463 6.42857 2.88111 6.36084 2.76055 6.24028C2.63999 6.11973 2.57227 5.95621 2.57227 5.78572C2.57227 5.61522 2.63999 5.45171 2.76055 5.33115C2.88111 5.21059 3.04463 5.14286 3.21512 5.14286H8.57227ZM6.66255 18.8383C6.71157 19.4275 6.98023 19.9768 7.41525 20.3772C7.85027 20.7776 8.41988 20.9999 9.01112 21H14.9906C15.5818 20.9999 16.1514 20.7776 16.5864 20.3772C17.0214 19.9768 17.2901 19.4275 17.3391 18.8383L18.3746 6.42857H5.62798L6.66255 18.8383ZM10.0723 9.42857C10.2428 9.42857 10.4063 9.4963 10.5268 9.61686C10.6474 9.73742 10.7151 9.90093 10.7151 10.0714V17.3571C10.7151 17.5276 10.6474 17.6912 10.5268 17.8117C10.4063 17.9323 10.2428 18 10.0723 18C9.90177 18 9.73826 17.9323 9.6177 17.8117C9.49714 17.6912 9.42941 17.5276 9.42941 17.3571V10.0714C9.42941 9.90093 9.49714 9.73742 9.6177 9.61686C9.73826 9.4963 9.90177 9.42857 10.0723 9.42857ZM14.5723 10.0714C14.5723 9.90093 14.5045 9.73742 14.384 9.61686C14.2634 9.4963 14.0999 9.42857 13.9294 9.42857C13.7589 9.42857 13.5954 9.4963 13.4748 9.61686C13.3543 9.73742 13.2866 9.90093 13.2866 10.0714V17.3571C13.2866 17.5276 13.3543 17.6912 13.4748 17.8117C13.5954 17.9323 13.7589 18 13.9294 18C14.0999 18 14.2634 17.9323 14.384 17.8117C14.5045 17.6912 14.5723 17.5276 14.5723 17.3571V10.0714Z"
                fill="#D52B2B"
              />
            </svg>
            <p className="font-nunito text-[#D42B2B] ml-3">Delete item</p>
          </div>
        </div>
      )}
      <div className="overflow-hidden w-[205px] h-[209px] max-sm:w-full rounded-md">
        <div
          className="absolute top-1 right-1 p-2 cursor-pointer"
          onClick={() => setShowMenu((prev) => !prev)}
        >
          <img src={Dots} alt="menu-icon" />
        </div>
        <div onClick={() => onClick && onClick()} className="cursor-pointer h-[209px]">
          <div className="h-[50%] max-h-[50%]">
            <img
              src={menuItem.image}
              alt="menu-item-image"
              className="w-[100%] h-[100%] object-cover"
            />
          </div>
          <div className="flex-1 p-4">
            <h1 className="font-nunito text-[18px] text-gray text-ellipsis overflow-hidden w-full whitespace-nowrap">
              {menuItem.name}
            </h1>
            <p className="mt-4 font-nunito text-[14px] text-primary">{menuItem.subtitle}</p>
          </div>
        </div>
      </div>
    </div>
  );
}
